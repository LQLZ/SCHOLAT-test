var Calendar=function(b,d,a,c){if(typeof b=="string"){this.Date=new Date();this.Year=this.Date.getFullYear();this.Month=this.Date.getMonth();this.Week=this.Date.getDay();this.Today=this.Date.getDate();this.InstanceId=b;this.Language=d||1;this.StartYear=a||this.Year-5;this.EndYear=c||this.Year+1;this.popContainer_id="popCalendarContainer";this.msgStore=[];this.caleContainer_id="calendarContainer";this.caleTop={lq_year_id:"linkQuickYear",lq_month_id:"linkQuickMonth",sq_year_id:"selectQuickYear",sq_month_id:"selectQuickMonth"};this.daysContainer_id="calendarDaysContainer";this.msgContainer_id="calendarTipsContainer";this.curDayClass="calendarCurrentDay";this.tipDayClass="calendarTipDay";this.tipCurrentDayClass="calendarTipCurrentDay";this.oldTipDayClass="calendarOldTipDay"}};Calendar.lang={weeks:[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]],weeksMenu:[["SUN","MON","TUE","WED","THU","FRI","SAT"],["SUN","MON","TUE","WED","THU","FRI","SAT"]]};Calendar.prototype._getViewElement=function(){var a="";a+="<div id="+this.caleContainer_id+">";a+='<div id="calendarTopContainer"><table cellpadding="0" cellspacing="0"><tr>';a+="<td>";a+='<table id="calendarYearMonthContainer" cellpadding="0" cellspacing="0">';a+="<tr>";a+="<td>";a+="<span id="+this.caleTop.lq_year_id+"></span>";a+="<select id="+this.caleTop.sq_year_id+"></select>";a+="</td>";a+="<td>";a+="<a id="+this.caleTop.lq_month_id+"></a>";a+="<select id="+this.caleTop.sq_month_id+"></select>";a+="</td>";a+="</tr>";a+="</table>";a+="</td>";a+="<td>";a+="</div>";a+="</td>";a+='</tr></table cellpadding="0" cellspacing="0"></div>';a+='<div id="calendarMainContainer">';a+='<div id="calendarWeeksContainer">';for(var b=0;b<7;b++){a+="<span>"+Calendar.lang.weeksMenu[this.Language][b]+"</span>"}a+="</div>";a+="<table id="+this.daysContainer_id+' cellpadding="0" cellspacing="0" onclick="window.location.href=\'ScholarCalendar.html\'">';for(var c=0;c<6;c++){a+="<tr>";for(var d=0;d<7;d++){a+="<td><span></span></td>"}a+="</tr>"}a+="</table>";a+="</div>";a+="</div>";a+="<div id="+this.msgContainer_id+"></div>";return a};Calendar.prototype._getMonthViewArray=function(f,g){var e=[];var a=new Date(f,g,1).getDay();var d=new Date(f,g+1,0).getDate();for(var c=0;c<42;c++){e[c]="&nbsp;"}for(var b=0;b<d;b++){e[b+a]=b+1}return e};Calendar.prototype._getOptionIndex=function(c,b){for(var a=0;a<c.options.length;a++){if(b==c.options[a].value){return a}}};Calendar.prototype._bindYearIntoSelect=function(){var c=this.find(this.caleTop.sq_year_id);var b=0;for(var a=this.StartYear;a<=this.EndYear;a++,b++){c.options[b]=new Option(a,a)}};Calendar.prototype._bindMonthIntoSelect=function(){var b=this.find(this.caleTop.sq_month_id);var c=0;for(var a=0;a<12;a++,c++){b.options[c]=new Option(a+1,a+1)}};Calendar.prototype._bindAllData=function(f,b){var d=this;this._bindYearIntoSelect();this._bindMonthIntoSelect();this.changeSelectValue(f,b);var j=this._getMonthViewArray(f,b);var e=this.find(this.daysContainer_id,"span");var a=this.Year+""+(this.Month+1)+""+this.Today;var g=this.find(this.caleTop.sq_year_id).value;var h=this.find(this.caleTop.sq_month_id).value;for(var c=0;c<e.length;c++){e[c].innerHTML=j[c];var k=g+""+h+""+e[c].innerHTML;if(a==k){e[c].className=this.curDayClass}else{e[c].className=""}}if(this.msgStore!=""){this._initPopMsg(this.msgStore)}};Calendar.prototype._bindAllEvent=function(){var b=this;var c=this.find(this.caleContainer_id,"a");for(var a=0;a<c.length;a++){c[a].onfocus=function(){this.blur()}}};Calendar.prototype._initCalendar=function(){this._bindAllEvent();this._bindAllData(this.Year,this.Month)};Calendar.prototype.changeSelectValue=function(e,d){var b=[],f=[],g=[];b[0]=e;b[1]=d+1;f[0]=this.caleTop.sq_year_id;f[1]=this.caleTop.sq_month_id;g[0]=this.caleTop.lq_year_id;g[1]=this.caleTop.lq_month_id;for(var a=0;a<f.length;a++){var j=this.find(f[a]);var c=this._getOptionIndex(j,b[a]);j.options[c].selected="selected";this.find(g[a]).innerHTML=j.value}var h=new Array("January","February","March","April","May","June","July","August","September","October","November","December");this.find(this.caleTop.lq_year_id).innerHTML=e;this.find(this.caleTop.lq_month_id).innerHTML=h[d]};Calendar.prototype.find=function(b,a){if(!a){return document.getElementById(b)}else{return this.find(b).getElementsByTagName(a)}};Calendar.prototype.css=function(b,a){var c=this.find(b);a.left?c.style.left=a.left:"";a.top?c.style.top=a.top:"";a.position?c.style.position=a.position:""};Calendar.prototype.showHide=function(a,b){return this.find(a).style.display=b};Calendar.prototype.show=function(a){var b=this.find(this.InstanceId);if(b){b.innerHTML=this._getViewElement();this._initCalendar();if(typeof a=="object"){this.msgStore=a;this._initPopMsg(this.msgStore)}}};Calendar.prototype._initPopMsg=function(){var d=this;var f=(this.Month+1)+""+this.Today;var g=this.find(this.caleTop.sq_year_id).value;var h=this.find(this.caleTop.sq_month_id).value;var l=this._getMonthViewArray(g,h);var e=this.find(this.daysContainer_id,"span");for(var j in this.msgStore){var k=j.substring(4);var a=j.substring(0,4);for(var c=0;c<e.length;c++){var b=h+""+e[c].innerHTML;if(b==k&&g==a){if(f==k&&this.Year==a){e[c].className=this.tipCurrentDayClass+" "+a}else{e[c].className=this.tipDayClass+" "+a}e[c].onmouseover=function(){var n=this.className.split(" ")[1]+""+h+""+this.innerHTML;var p=this.className.split(" ")[1],i=h,o=this.innerHTML;d.find(d.msgContainer_id).innerHTML=d._getMsgHtml(p,i,o);d.showHide(d.msgContainer_id,"block")}}}}d.find(d.caleContainer_id).onmouseout=function(){d.showHide(d.msgContainer_id,"none")}};Calendar.prototype._getMsgHtml=function(g,b,f){var c=g+b+f;var e=g+"-"+b+"-"+f;var a="<div>"+e+"</div><div>"+this.msgStore[c]+"</div>";return a};Calendar.prototype.pop=function(){var a=this;var b=this.find(this.InstanceId);if(b){b.onclick=function(f){var f=window.event||f;var c=f.x||f.pageX,g=f.y||f.pageY;if(!a.find(a.popContainer_id)){var d=document.createElement("div");d.id=a.popContainer_id;document.body.appendChild(d)}else{a.showHide(a.popContainer_id,"block")}a.find(a.popContainer_id).innerHTML=a._getViewElement();a._initCalendar();a.css(a.popContainer_id,{position:"absolute",left:c+"px",top:g+"px"})}}};