function getCheckedValueByName(b){var a=document.getElementsByName(b);for(var c=0;c<a.length;c+=1){if(a[c].checked){return c}}return null}var defaultInput="请输入要搜索的内容";function searchInputOnFocus(){if($("#q").val()==defaultInput){$("#q").val("");document.getElementById("q").style.color="#000"}}function enterIn(a){var b=a?a:(window.event?window.event:null);if(a.keyCode==13){searchMyPostMessage(1)}}function searchMyPostMessage(c){$("#tabs-1").remove();$("#tabs_1").remove();$("#tabs_2").remove();$("#tabs_3").remove();$("#myMessage").attr("class","topTag");$("#myMessage").css("color","black");$("#reprintMessage").attr("class","topTag");$("#reprintMessage").css("color","black");$("#collectMessage").attr("class","topTag");$("#collectMessage").css("color","black");$("#tabs_4").show();$("#allMyPostMessage").html("");$("#numberAndTime").html("");$("#searchResultPagination").html("");var b=$("#q").val();if(b!=null&&b!=defaultInput){b=$.trim(b);if(b==""){b="*:*"}var a=getCheckedValueByName("sortType");if(a==null){a=0}$.ajax({type:"post",url:"./ml_searchMyPostmessage.html",data:{q:b,cpage:c,orderType:a,},dataType:"json",cache:false,timeout:10000,success:function(i){if(i[0].totalResultNumber==0){$("#searchResult").html('<font color="red">没找到相关结果</font>');return}var j=showItem(i[0].docs);$("#searchResult").html(j);if(i[0].totalResultNumber){$("#numberAndTime").html("搜索到相关结果"+i[0].totalResultNumber+"个")}var g=i[0].pagesize;var l=i[0].total;var e=i[0].begin;var h=e+g-1;if(h>(i[0].docs.length-1)){h=i[0].docs.length-1}if(l>1){var f="";var k="";var d="";if(l<=10){for(count=1;count<=l;count+=1){if(count!=c){d+='<a class="new_page" href="javascript:searchMyPostMessage('+count+');">'+count+"</a>"}else{d+='<span class="current_page" >'+count+"</span>"}}}if(l>10){if(parseInt((c-1)/10)==0){for(count=1;count<=10;count+=1){if(count!=c){d+='<a class="new_page" href="javascript:searchMyPostMessage('+count+');">'+count+"</a>"}else{d+='<span class="current_page" >'+count+"</span>"}}d+='<a class="new_page" href="javascript:searchMyPostMessage('+count+');">»</a>'}else{if(parseInt((c-1)/10)==parseInt(l/10)){d+='<a class="new_page" href="javascript:searchMyPostMessage('+parseInt((c-1)/10)*10+');">«</a>';for(count=parseInt(l/10)*10+1;count<=l;count+=1){if(count!=c){d+='<a class="new_page" href="javascript:searchMyPostMessage('+count+');">'+count+"</a>"}else{d+='<span class="current_page" >'+count+"</span>"}}}else{d+='<a class="new_page" href="javascript:searchMyPostMessage('+parseInt((c-1)/10)*10+');">«</a>';for(count=parseInt((c-1)/10)*10+1;count<=parseInt((c-1)/10)*10+10;count+=1){if(count!=c){d+='<a class="new_page" href="javascript:searchMyPostMessage('+count+');">'+count+"</a>"}else{d+='<span class="current_page" >'+count+"</span>"}}d+='<a class="new_page" href="javascript:searchMyPostMessage('+count+');">»</a>'}}}if(c>1){k='<div id="setpage"><a class="new_page_ne" href="javascript:searchMyPostMessage(1);">[第一页]</a>';k+='<a class="new_page_ne" href="javascript:searchMyPostMessage('+(c-1)+');">[上一页]</a>'}if(c<l){k+='<a class="new_page_ne" href="javascript:searchMyPostMessage('+(c+1)+');">[下一页]</a>'}if(c<l-1){k+='<a class="new_page_ne" href="javascript:searchMyPostMessage('+l+');">[最后页]</a>'}k+="["+d+']<span id="info_page">共'+l+"页|第"+c+"页</span></div>";f='<div id="hidePage'+c+'" class="panel_content_unindent_3">'+k+"</div>";$("#searchResultPagination").html(f)}}})}}function showItem(e){var a="";var c=0;var d;var b;$(e).each(function(){d="itemLi_"+c;a+='<li class="sResultItem" id="'+d+'">';var g="";var h="";var f="";if(this.source==0){g="(原创)";f='<span class="sResultRemove"  onclick="deletePostMessageByAjax('+this.id+",'"+d+'\')"><a href="#no"  style="text-decoration: none; color: gray;">删除动态 </a></span>';h='<span class="sResultEdit"><a href="./editPostMessage.html?id='+this.id+'" style="text-decoration: none; color: gray;">编辑 </a></span>'}else{if(this.source==1){g="(转载)";f='<span class="sResultRemove"  onclick="deleteReprintPostMessageByAjax('+this.id+",'"+d+'\')"><a href="#no"  style="text-decoration: none; color: gray;">取消转载 </a></span>';h='<span class="sResultEdit"></span>'}else{if(this.source==2){g="(收藏)";f='<span class="sResultRemove"  onclick="deleteCollectPostMessageByAjax('+this.id+",'"+d+'\')"><a href="#no"  style="text-decoration: none; color: gray;">取消收藏 </a></span>';h='<span class="sResultEdit"><a href="./editColPostMessage.html?id='+this.id+'" style="text-decoration: none; color: gray;">编辑 </a></span>'}}}if(this.source==2){if(this.type){b="vpost.html?msgType=true&pid="+this.reprontMsgId}else{b="vpost.html?pid="+this.reprontMsgId}}else{b="vpost.html?pid="+this.id}a+='&nbsp;<span class="sResultTitle" style="float: left;">';a+='<font color="grey">'+g+'</font>&nbsp;&nbsp;<a href="'+b+'" target="_blank">'+this.title+" </a></span>";a+='<div style="float:right;width:250px;">';a+='&nbsp;<span class="sResultDate">'+this.date.substring(0,10)+"</span>";a+="&nbsp;&nbsp;&nbsp;&nbsp;"+f;a+="&nbsp;&nbsp;&nbsp;&nbsp;"+h;a+="</div>";a+="</li>";c+=1});return a}function onerrorHandle(a){a.style.display="none";a.onerror=null};